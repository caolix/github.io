# HTTP

## PUT和POST的区别

上面这两段描述的关键词就是“idempotent”（幂等），理解了这个词就理解了二者的本质区别。下面就围绕这个词从以下几个角度分析PUT和POST的区别。

1、使用PUT时，必须明确知道要操作的对象，例如：

PUT /customer/doc/1

{

"name": "John Doe"

}

上面的PUT请求明确是对编号为1的文档进行操作，这里编号为1的文档就是要操作的对象。**如果该文档不存在，就创建该文档；如果文档已经存在，就直接整个替换文档内容**。

2、 有人可能会质疑，上面的例子用POST也可以实现。没错，如果用将上例中的PUT接口改成POST接口，就是这样：

POST /customer/doc/

{

"name": "John Doe"

}

注意这里有一个重要的不同，这里POST请求并不知道要操作的对象，它只是向HTTP服务器提交一篇新文档，由HTTP服务器为该文档产生一个编号。这就是上面从RFC7231中摘出的第二段文字所描述的含义。

3、有人可能会继续质问：用POST也可以用来修改目标资源对象阿。说得还是没错。还是沿用上面的例子，稍作如下改动：

POST /customer/doc/1

{

"description": "I am a student"

}

这里的含义是给编号为1的文档增加一个属性“description”。注意这里有两个不同：（1）这里编号为1的文档必须是已经存在的文档，否则必须使用PUT；（2）这里是对目标对象的部分修改。只是增加了一个新属性“description”，之前的属性“name”不受影响。

４、最后简要总结一下，使用PUT时，必须明确知道要操作的对象，如果对象不存在，创建对象；如果对象存在，则全部替换目标对象。同样POST既可以创建对象，也可以修改对象。但用POST创建对象时，之前并不知道要操作的对象，由HTTP服务器为新创建的对象生成一个唯一的URI；使用POST修改已存在的对象时，一般只是修改目标对象的部分内容。